<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í–æ–ª–∂—Å–∫–æ–µ –ö–∞–∑–∏–Ω–æ</title>
  <style>
    body {
      font-family: sans-serif;
      background: #222;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    h1 {
      color: #f39c12;
    }
    .game {
      display: none;
    }
    .cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px;
    }
    .card {
      width: 60px;
      height: 90px;
      border: 2px solid #fff;
      border-radius: 8px;
      font-size: 24px;
      line-height: 90px;
      background: #fff;
      color: #000;
      position: relative;
      transition: transform 0.3s ease;
      transform-style: preserve-3d;
    }
    .card:hover {
      transform: scale(1.1);
    }
    .card.red {
      color: red;
    }
    .card-back {
      background: #444;
      color: transparent;
    }
    button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
    }
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }
    #balance {
      font-weight: bold;
      margin-bottom: 10px;
    }
    @media (max-width: 600px) {
      .card {
        width: 40px;
        height: 60px;
        font-size: 18px;
        line-height: 60px;
      }
      button {
        width: 100%;
        margin: 5px 0;
      }
    }
    .history {
      text-align: left;
      max-height: 150px;
      overflow-y: auto;
      background: #111;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–í–æ–ª–∂—Å–∫–æ–µ –ö–∞–∑–∏–Ω–æ</h1>
    <p id="balance">–í–∞—à–∏ —Ä—É–±—á–∏–∫–∏: <span id="balanceValue">1000</span> ‚ÇΩ</p>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="bet" value="100" min="10" max="1000"></label>
    <div>
      <button onclick="showGame('slots')">–ò–≥—Ä–æ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç</button>
      <button onclick="showGame('roulette')">–†—É–ª–µ—Ç–∫–∞</button>
      <button onclick="showGame('blackjack')">–ë–ª—ç–∫–¥–∂–µ–∫</button>
    </div>

    <div id="slots" class="game">
      <h2>üé∞ –ò–≥—Ä–æ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç</h2>
      <p id="slotResult"></p>
      <div class="cards" id="slotReels"></div>
      <button onclick="playSlots()">–ö—Ä—É—Ç–∏—Ç—å</button>
      <div class="history" id="slotHistory"></div>
    </div>

    <div id="roulette" class="game">
      <h2>üéØ –†—É–ª–µ—Ç–∫–∞</h2>
      <p id="rouletteResult"></p>
      <input type="number" id="rouletteNumber" placeholder="–ß–∏—Å–ª–æ 0-36" min="0" max="36">
      <button onclick="playRoulette()">–ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É</button>
      <div class="history" id="rouletteHistory"></div>
    </div>

    <div id="blackjack" class="game">
      <h2>üÇ° –ë–ª—ç–∫–¥–∂–µ–∫</h2>
      <p id="blackjackResult"></p>
      <div>
        <h3>–î–∏–ª–µ—Ä</h3>
        <div class="cards" id="dealerCards"></div>
      </div>
      <div>
        <h3>–ò–≥—Ä–æ–∫</h3>
        <div class="cards" id="playerCards"></div>
      </div>
      <button id="hitBtn">–ï—â—ë</button>
      <button id="standBtn">–•–≤–∞—Ç–∏—Ç</button>
      <button id="dealBtn">–°–¥–∞—Ç—å</button>
      <div class="history" id="blackjackHistory"></div>
    </div>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>

  <script>
    let balance = 1000;
    const balanceValue = document.getElementById("balanceValue");
    const betInput = document.getElementById("bet");
    const currentBet = () => Math.min(balance, parseInt(betInput.value) || 0);

    function updateBalance() {
      balanceValue.textContent = balance;
    }

    function showGame(id) {
      document.querySelectorAll(".game").forEach(g => g.style.display = "none");
      document.getElementById(id).style.display = "block";
      if (id === "blackjack") setupBlackjack();
    }

    function logHistory(game, text) {
      const el = document.getElementById(game + 'History');
      const entry = document.createElement('div');
      entry.textContent = new Date().toLocaleTimeString() + ": " + text;
      el.prepend(entry);
    }

    // –ò–≥—Ä–æ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç
    // –°–ª–æ—Ç—ã ‚Äî —Å–∏–º–≤–æ–ª—ã –í–æ–ª–≥–∞, —à–∞—à–ª—ã–∫ –∏ –Ω–∞–ø–∏—Ç–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–µ–º–æ–π
const slotSymbols = ["üçñ", "üç∫", "üç∑", "üö§", "üåä", "ü•É", "üçª", "üçó"];
    function playSlots() {
      const result = [];
      const reels = document.getElementById("slotReels");
      reels.innerHTML = "";

      if (balance < currentBet()) {
        document.getElementById("slotResult").textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä—É–±—á–∏–∫–æ–≤!";
        return;
      }

      balance -= currentBet();
      updateBalance();

      for (let i = 0; i < 3; i++) {
        const symbol = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
        result.push(symbol);
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = symbol;
        reels.appendChild(div);
      }

      const allSame = result.every(s => s === result[0]);
      let win = 0;
      if (allSame) {
        win = currentBet() * 5;
        balance += win;
        createConfetti();
        document.getElementById("slotResult").textContent = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} ‚ÇΩ!`;
        logHistory('slot', `–ü–æ–±–µ–¥–∞ –Ω–∞ —Å–ª–æ—Ç–∞—Ö: +${win} ‚ÇΩ`);
      } else {
        document.getElementById("slotResult").textContent = "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!";
        logHistory('slot', `–ü—Ä–æ–∏–≥—Ä—ã—à –Ω–∞ —Å–ª–æ—Ç–∞—Ö: -${currentBet()} ‚ÇΩ`);
      }
      updateBalance();
    }

    // –†—É–ª–µ—Ç–∫–∞
    function playRoulette() {
      const number = parseInt(document.getElementById("rouletteNumber").value);
      if (isNaN(number) || number < 0 || number > 36) {
        document.getElementById("rouletteResult").textContent = "–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 36.";
        return;
      }

      if (balance < currentBet()) {
        document.getElementById("rouletteResult").textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä—É–±—á–∏–∫–æ–≤!";
        return;
      }

      balance -= currentBet();
      const rolled = Math.floor(Math.random() * 37);
      let result = `–í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ ${rolled}. `;

      if (rolled === number) {
        const win = currentBet() * 36;
        balance += win;
        result += `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} ‚ÇΩ!`;
        createConfetti();
        logHistory('roulette', `–£–≥–∞–¥–∞–ª–∏ ${rolled}, –≤—ã–∏–≥—Ä—ã—à: +${win} ‚ÇΩ`);
      } else {
        result += "–£–≤—ã, –≤—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.";
        logHistory('roulette', `–°—Ç–∞–≤–∫–∞ –Ω–∞ ${number}, –≤—ã–ø–∞–ª–æ ${rolled}, –ø—Ä–æ–∏–≥—Ä—ã—à: -${currentBet()} ‚ÇΩ`);
      }

      document.getElementById("rouletteResult").textContent = result;
      updateBalance();
    }

    // –ë–ª—ç–∫–¥–∂–µ–∫
    const dealerCardsEl = document.getElementById("dealerCards");
    const playerCardsEl = document.getElementById("playerCards");
    const blackjackResult = document.getElementById("blackjackResult");
    const hitBtn = document.getElementById("hitBtn");
    const standBtn = document.getElementById("standBtn");
    const dealBtn = document.getElementById("dealBtn");

    function setupBlackjack() {
      hitBtn.onclick = hit;
      standBtn.onclick = stand;
      dealBtn.onclick = deal;
      deal();
    }

    function getCardValue(card) {
      const value = card.slice(0, -1);
      if (['J', 'Q', 'K'].includes(value)) return 10;
      if (value === 'A') return 11;
      return parseInt(value);
    }

    function calculateScore(cards) {
      let total = 0;
      let aces = 0;
      cards.forEach(card => {
        let val = getCardValue(card);
        total += val;
        if (val === 11) aces++;
      });
      while (total > 21 && aces > 0) {
        total -= 10;
        aces--;
      }
      return total;
    }

    function getCardsArray(container) {
      return [...container.children].filter(card => !card.classList.contains('card-back')).map(card => card.textContent);
    }

    function addCard(container, hidden = false) {
      const card = document.createElement('div');
      card.classList.add('card');
      const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
      const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
      const suit = suits[Math.floor(Math.random() * suits.length)];
      const value = values[Math.floor(Math.random() * values.length)];
      const fullCard = value + suit;
      if (hidden) {
        card.classList.add('card-back');
        card.setAttribute('data-real-value', fullCard);
      } else {
        card.textContent = fullCard;
        card.classList.add(['‚ô•', '‚ô¶'].includes(suit) ? 'red' : 'black');
      }
      container.appendChild(card);
    }

    function deal() {
      dealerCardsEl.innerHTML = '';
      playerCardsEl.innerHTML = '';
      blackjackResult.textContent = '';

      if (balance < currentBet()) {
        blackjackResult.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä—É–±—á–∏–∫–æ–≤!';
        return;
      }

      balance -= currentBet();
      updateBalance();

      addCard(dealerCardsEl, true);
      addCard(dealerCardsEl);
      addCard(playerCardsEl);
      addCard(playerCardsEl);
    }

    function hit() {
      addCard(playerCardsEl);
      const score = calculateScore(getCardsArray(playerCardsEl));
      if (score > 21) {
        blackjackResult.textContent = `–ü–µ—Ä–µ–±–æ—Ä! –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.`;
        logHistory('blackjack', `–ü–µ—Ä–µ–±–æ—Ä. –ü—Ä–æ–∏–≥—Ä—ã—à: -${currentBet()} ‚ÇΩ`);
      }
    }

    function stand() {
      const dealerHidden = dealerCardsEl.querySelector('.card-back');
      if (dealerHidden) {
        const real = dealerHidden.getAttribute('data-real-value');
        dealerHidden.classList.remove('card-back');
        dealerHidden.textContent = real;
        dealerHidden.classList.add(['‚ô•', '‚ô¶'].includes(real.slice(-1)) ? 'red' : 'black');
      }

      while (calculateScore(getCardsArray(dealerCardsEl)) < 17) {
        addCard(dealerCardsEl);
      }

      const playerScore = calculateScore(getCardsArray(playerCardsEl));
      const dealerScore = calculateScore(getCardsArray(dealerCardsEl));

      let message;
      if (playerScore > 21) {
        message = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.';
        logHistory('blackjack', `–ü–µ—Ä–µ–±–æ—Ä. -${currentBet()} ‚ÇΩ`);
      } else if (dealerScore > 21 || playerScore > dealerScore) {
        const win = currentBet() * 2;
        balance += win;
        message = `–í—ã –ø–æ–±–µ–¥–∏–ª–∏! +${win} ‚ÇΩ`;
        createConfetti();
        logHistory('blackjack', `–ü–æ–±–µ–¥–∞! +${win} ‚ÇΩ`);
      } else if (playerScore < dealerScore) {
        message = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.';
        logHistory('blackjack', `–ü—Ä–æ–∏–≥—Ä—ã—à. -${currentBet()} ‚ÇΩ`);
      } else {
        balance += currentBet();
        message = '–ù–∏—á—å—è. –°—Ç–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞.';
        logHistory('blackjack', `–ù–∏—á—å—è. 0 ‚ÇΩ`);
      }
      updateBalance();
      blackjackResult.textContent = message;
    }

    function createConfetti() {
      const canvas = document.getElementById('confettiCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const pieces = Array.from({ length: 150 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height - canvas.height,
        r: Math.random() * 6 + 4,
        d: Math.random() * 40 + 10,
        color: `hsl(${Math.random() * 360}, 100%, 50%)`
      }));

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        pieces.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fillStyle = p.color;
          ctx.fill();
        });
        update();
      }

      function update() {
        pieces.forEach(p => {
          p.y += Math.cos(p.d / 10) + 1 + p.r / 2;
          p.x += Math.sin(p.d / 10);
        });
      }

      let interval = setInterval(draw, 16);
      setTimeout(() => clearInterval(interval), 3000);
    }
  </script>
</body>
</html>
